<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="signInSignUp.Pages.TaskDetails"
             BackgroundColor="FloralWhite">

    <VerticalStackLayout>

        <!-- Top Bar -->
        <Grid ColumnDefinitions="Auto,*,Auto,Auto" Padding="15">

            <!-- Back Button -->
            <ImageButton Source="back_icon.png"
                         Clicked="OnBackClicked"
                         HeightRequest="24"
                         WidthRequest="24"/>

            <Label Grid.Column="1" Text="" />

            <!-- Attach Files Button -->
            <ImageButton Grid.Column="1"
                         Source="attachfiles.png"
                         HeightRequest="24"
                         WidthRequest="24"
                         Margin="0,0,-205,0"
                         Clicked="OnAttachClicked">
            </ImageButton>

            <!-- Attach Image Button -->
            <ImageButton Grid.Column="2"
                         Source="attachimage.png"
                         HeightRequest="24"
                         WidthRequest="24"
                         Clicked="OnImageClicked">

            </ImageButton>

            <!-- 3-dot Menu -->
            <ImageButton Grid.Column="3"
                         Source="threedotmenu.svg"
                         HeightRequest="30"
                         WidthRequest="30"
                         Clicked="OnMoreOptionsClicked">
            </ImageButton>

        </Grid>


        <!-- Task Title -->
        <Entry x:Name="TaskNameEntry"
               FontSize="36"
               FontFamily="Inter24ExtraBold"
               TextColor="#6E7C5E"
               Placeholder="Task Title"
               BackgroundColor="FloralWhite"
               Margin="20,0,20,10" />
        <ScrollView>
            <VerticalStackLayout Padding="20" Spacing="20">

                <Editor x:Name="TaskDescriptionEditor"
                        Placeholder="Task Notes"
                        AutoSize="TextChanges" />

                <!-- File Attachment Preview -->
                <StackLayout x:Name="AttachmentPreview" IsVisible="False">
                    <Label Text="Attachment Preview"
                           FontAttributes="Bold"
                           FontSize="20"
                           TextColor="#6E7C5E" />
                    <HorizontalStackLayout Spacing="10" VerticalOptions="Start">
                        <Image x:Name="FileIcon" WidthRequest="32" HeightRequest="32" />
                        <Label x:Name="FileNameLabel"
                               VerticalTextAlignment="Center"
                               LineBreakMode="TailTruncation" />
                    </HorizontalStackLayout>
                </StackLayout>

                <!-- Image Attachment Preview -->
                <StackLayout x:Name="ImagePreview" IsVisible="False">
                    <Label Text="Image Preview"
                           FontAttributes="Bold"
                           FontSize="18"
                           TextColor="#6E7C5E" />
                    <Image x:Name="SelectedImage"
                           HeightRequest="150"
                           Aspect="AspectFill" />
                </StackLayout>

                <Button x:Name="AddButton" Text="Add Task" Clicked="OnAddTaskClicked" IsVisible="False"
                    BackgroundColor="#6E7C5E" TextColor="White" CornerRadius="10"/>

                <!-- Status Label -->
                <Label x:Name="StatusLabel"
                       TextColor="Green"
                       IsVisible="False" />

            </VerticalStackLayout>
        </ScrollView>

    </VerticalStackLayout>

</ContentPage>
